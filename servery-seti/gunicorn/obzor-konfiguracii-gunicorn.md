# Обзор конфигурации gunicorn

**Gunicorn** считывает информацию о конфигурации из пяти мест.

Сначала **Gunicorn** считывает переменные среды для некоторых параметров [settings](nastroika-gunicorn.md).

Затем **Gunicorn** считывает конфигурацию из файла конфигурации конкретной платформы. В настоящее время это касается только приложений **Paster**.

Третий источник информации о конфигурации — это необязательный файл конфигурации **gunicorn.conf.py**, который можно найти в текущем рабочем каталоге или указать с помощью аргумента командной строки. Все, что указано в этом файле конфигурации, переопределит любые настройки, специфичные для фреймворка.

Четвертое место информации о конфигурации — это аргументы командной строки, хранящиеся в переменной среды с именем **GUNICORN\_CMD\_ARGS**.

Наконец, аргументы командной строки, используемые для вызова **Gunicorn**, являются последним местом, рассматриваемым для настроек конфигурации. Если параметр указан в командной строке, это значение будет использоваться.

Когда файл конфигурации указан в аргументах командной строки и в переменной среды **GUNICORN\_CMD\_ARGS**, используется только файл конфигурации, указанный в командной строке.

Еще раз, **в порядке от менее авторитетного к наиболее авторитетному**:

1. Переменные среды
2. Настройки фреймворка
3. Файл конфигурации
4. GUNICORN\_CMD\_ARGS
5. Командная строка

{% hint style="info" %}
Чтобы распечатать разрешенную конфигурацию при использовании командной строки или файла конфигурации, вы можете запустить следующую команду:

```bash
$ gunicorn --print-config APP_MODULE
```

Чтобы проверить разрешенную конфигурацию при использовании командной строки или файла конфигурации, вы можете запустить следующую команду:

```bash
$ gunicorn --check-config APP_MODULE
```

Это также позволяет вам узнать, может ли ваше приложение быть запущено.
{% endhint %}

## Командная строка

Если параметр указан в командной строке, он переопределяет все другие значения, которые могли быть указаны в конкретных настройках приложения или в дополнительном файле конфигурации. Не все настройки **Gunicorn** доступны для установки из командной строки. Чтобы увидеть полный список настроек командной строки, вы можете сделать обычно:

```bash
$ gunicorn -h
```

Также для сценариев командной строки доступен флаг **--version**, который не упоминается в списке [settings](nastroika-gunicorn.md).

## Файл конфигурации

Файл конфигурации должен быть действительным исходным файлом Python с расширением python (например, **gunicorn.conf.py**). Он должен быть доступен только для чтения из файловой системы. В частности, он не обязательно должен находиться на пути к модулю (**sys.path**, **PYTHONPATH**). Любой Python действителен. Просто учтите, что это будет запускаться каждый раз, когда вы запускаете **Gunicorn** (в том числе, когда вы сигнализируете **Gunicorn** о перезагрузке).

Чтобы установить параметр, просто присвойте ему значение. Специального синтаксиса нет. Предоставленные вами значения будут использоваться в качестве значений конфигурации.

Например:

```python
import multiprocessing

bind = "127.0.0.1:8000"
workers = multiprocessing.cpu_count() * 2 + 1
```

Все настройки указаны в списке [настроек](nastroika-gunicorn.md).

## Настройки фреймворка

В настоящее время только приложения **Paster** имеют доступ к настройкам фреймворка. Если у вас есть идеи по предоставлению настроек приложениям **WSGI** или извлечению информации из Django **settings.py**, не стесняйтесь [открывать вопрос](https://github.com/benoitc/gunicorn/issues), чтобы сообщить нам об этом.

### Приложения Paster

В вашем INI-файле вы можете указать использовать **Gunicorn** в качестве сервера следующим образом:

```ini
[server:main]
use = egg:gunicorn#main
host = 192.168.0.1
port = 80
workers = 2
proc_name = brim
```

Любые параметры, о которых знает **Gunicorn**, будут автоматически вставлены в базовую конфигурацию. Помните, что они будут переопределены файлом конфигурации и/или командной строкой.
