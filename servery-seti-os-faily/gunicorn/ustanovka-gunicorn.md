# Установка gunicorn

**Требования: Python 3.x >= 3.5**

Чтобы установить последнюю выпущенную версию **Gunicorn**:

```bash
$ pip install gunicorn
```

## Из источника

Вы можете установить **Gunicorn** из исходного кода так же, как и любой другой пакет Python:

```bash
$ pip install git+https://github.com/benoitc/gunicorn.git
```

Это позволит вам быть в курсе разработки на GitHub:

```bash
$ pip install -U git+https://github.com/benoitc/gunicorn.git
```

## Асинхронные воркеры

Вы также можете установить [Eventlet](http://eventlet.net/) или [Gevent](http://www.gevent.org/), если вы ожидаете, что коду вашего приложения может потребоваться пауза в течение длительных периодов времени во время обработки запроса. Ознакомьтесь с проектной документацией для получения дополнительной информации о том, когда вы захотите рассмотреть один из альтернативных типов воркеров.

```bash
$ pip install greenlet            # Требуется для обоих
$ pip install eventlet            # Для воркеров eventlet
$ pip install gunicorn[eventlet]  # Или, используя доп.
$ pip install gevent              # Для воркеров gevent
$ pip install gunicorn[gevent]    # Или, используя доп.
```

{% hint style="info" %}
Требуется для обоих **greenlet**, который должен быть установлен автоматически. Если его установка не удалась, вам, вероятно, потребуется установить заголовки Python. Эти заголовки доступны в большинстве менеджеров пакетов. В Ubuntu имя пакета для **apt-get** — **python-dev**.

**Gevent** также требует, чтобы был установлен **libevent 1.4.x** или **2.0.4**. Это может быть более поздняя версия, чем та, что доступна в вашем менеджере пакетов. Если [Gevent](http://www.gevent.org/) не собирается даже при установленном [libevent](http://libevent.org/), это наиболее вероятная причина.
{% endhint %}

## Дополнительные пакеты

Для некоторых опций **Gunicorn** требуются дополнительные пакеты. Вы можете использовать синтаксис **\[extra]**, чтобы установить их одновременно с **Gunicorn**.

Большинство дополнительных пакетов необходимы для альтернативных типов воркеров процессов. См. [проектную документацию](dizain-gunicorn.md) для получения дополнительной информации о том, когда вы захотите рассмотреть альтернативный тип воркера.

* `gunicorn[eventlet]` — воркеры-гринлеты на основе **Eventlet**
* `gunicorn[gevent]` - воркеры-гринлеты на основе **Gevent**
* `gunicorn[gthread]` — Многопоточные воркеры
* `gunicorn[tornado]` - воркеры на основе **Tornado**, не рекомендуется

Если вы используете более одного экземпляра **Gunicorn**, параметр [proc\_name](nastroika-gunicorn.md) поможет различать их в таких инструментах, как **ps** и **top**.

* `gunicorn[setproctitle]` — позволяет установить имя процесса

Можно комбинировать несколько дополнений, например `pip install gunicorn[gevent,setproctitle]`.

## Debian GNU/Linux

Если вы используете **Debian GNU/Linux**, рекомендуется использовать системные пакеты для установки **Gunicorn**, за исключением случаев, когда вы хотите использовать разные версии **Gunicorn** с **virtualenv**. Это имеет ряд преимуществ:

* Установка без усилий: автоматически запускает несколько экземпляров **Gunicorn** на основе конфигураций, определенных в `/etc/gunicorn.d`.
* Рациональное расположение журналов по умолчанию (`/var/log/gunicorn`). Журналы можно автоматически ротировать и сжимать с помощью **logrotate**.
* Улучшенная безопасность: можно легко запускать каждый экземпляр **Gunicorn** с выделенным пользователем/группой UNIX.
* Рациональный путь обновления: обновление до более новых версий приводит к меньшему времени простоя, обрабатывает конфликтующие изменения в параметрах конфигурации и может быть быстро отменено в случае несовместимости. Пакет также может быть полностью удален из системы за считанные секунды.

### Стабильный ("buster")

Версия **Gunicorn** в «стабильном» дистрибутиве [Debian](https://www.debian.org/) — `19.9.0` (декабрь 2020 г.). Вы можете установить его с помощью:

```bash
$ sudo apt-get install gunicorn3
```

Вы также можете использовать самую последнюю версию `20.0.4` (декабрь 2020 г.) с помощью [Debian Backports](https://backports.debian.org/). Сначала скопируйте следующую строку в ваш файл `/etc/apt/sources.list`:

```bash
deb http://ftp.debian.org/debian buster-backports main
```

Затем обновите локальные списки пакетов:

```bash
$ sudo apt-get update
```

Затем вы можете установить последнюю версию, используя:

```bash
$ sudo apt-get -t buster-backports install gunicorn
```

### Предыдущая стабильная ("stretch")

В то время как выпуски **Debian** новее, чем **Stretch**, предоставят вам **gunicorn** с поддержкой Python 3, независимо от того, устанавливаете ли вы пакет **gunicorn** или **gunicorn3** для **Stretch**, вам необходимо установить **gunicorn3**, чтобы получить поддержку Python 3.

Версия **Gunicorn** в «старом стабильном» дистрибутиве **Debian** — `19.6.0` (декабрь 2020 г.). Вы можете установить его с помощью:

```bash
$ sudo apt-get install gunicorn3
```

Вы также можете использовать самую последнюю версию `19.7.1` (декабрь 2020 г.) с помощью [Debian Backports](https://backports.debian.org/). Сначала скопируйте следующую строку в ваш файл `/etc/apt/sources.list`:

```bash
deb http://ftp.debian.org/debian stretch-backports main
```

Затем обновите локальные списки пакетов:

```bash
$ sudo apt-get update
```

Затем вы можете установить последнюю версию, используя:

```bash
$ sudo apt-get -t stretch-backports install gunicorn3
```

### Тестируемая ("bullseye") / нестабильная ("sid")

«bullseye» и «sid» содержат последнюю выпущенную версию **Gunicorn 20.0.4** (декабрь 2020 г.). Вы можете установить его обычным способом:

```bash
$ sudo apt-get install gunicorn
```

## Ubuntu

[Ubuntu](https://www.ubuntu.com/) `20.04 LTS` (Focal Fossa) или более поздняя версия содержит пакет **Gunicorn** по умолчанию `20.0.4` (декабрь 2020 г.), поэтому вы можете установить его обычным способом:

```bash
$ sudo apt-get update
$ sudo apt-get install gunicorn
```
