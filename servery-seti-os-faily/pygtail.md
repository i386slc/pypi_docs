# pygtail

«Порт» на python для[ logtail2 от logcheck](http://logcheck.org/).

**Pygtail** читает строки файла журнала, которые не были прочитаны. Он будет обрабатывать даже файлы журналов, которые были ротированы.

## Применение

Из командной строки:

```bash
Использование: pygtail.py [options] logfile

Печатает строки файла журнала, которые не были прочитаны.

Параметры:
  -h, --help            показать это справочное сообщение и выйти
  -o OFFSET_FILE, --offset-file=OFFSET_FILE
                        Файл, в который записываются данные смещения
                        (по умолчанию: <logfile>.offset).
  -p, --paranoid        Обновляет файл смещения каждый раз, когда мы читаем
                        строку (а не только тогда, когда мы достигаем конца файла).
  -n N, --every-n=N     Обновляет файл смещения каждый N-й раз, когда мы читаем
                        строку (а не только тогда, когда мы достигаем конца файла).
  --no-copytruncate     Не поддерживать ротацию журналов в стиле copytruncate.
                        Вместо этого, если файл журнала сжимается, выводит
                        предупреждение.
  --read-from-end       Читает файл журнала с конца, если файл смещения отсутствует.
                        Полезно для больших файлов.
  --log-pattern         Пользовательский шаблон ротации журнала. Используйте %s
                        для представления исходного имени файла. Вы можете
                        использовать это несколько раз, чтобы предоставить
                        несколько шаблонов.
  --full_lines          Записывает только тогда, когда строка заканчивается
                        новой строкой `\n` (по умолчанию: False)
  --encoding ENCODING   Кодировка для чтения файлов (по умолчанию: system
                        encoding)
  --version             Печатает версию и выходит.
```

В вашем коде:

```python
from pygtail import Pygtail

for line in Pygtail("some.log"):
    sys.stdout.write(line)
```

Пример, показывающий перебор строк со смещениями и ручное управление обновлениями смещений:

```python
import pygtail

tail = pygtail.Pygtail(logfile, save_on_end=False, copytruncate=False)

for line, offset in tail.with_offsets():
    # Что делает

 # выяснить правильное смещение, чтобы сохранить
 tail.write_offset_to_file(right_offset)
```

## Содействие

Запросы на вытягивание очень приветствуются, но я не буду объединять ваши изменения, если вы не включите тест. Запустите тесты с помощью теста `python setup.py test`.
