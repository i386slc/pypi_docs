# Расширение API Supervisor XML-RPC

Supervisor можно расширить с помощью новых API-интерфейсов XML-RPC. Уже существует несколько сторонних подключаемых модулей, которые можно подключить к вашей конфигурации Supervisor. Вы можете дополнительно написать свой собственный. Расширяемые интерфейсы XML-RPC — это расширенная функция, представленная в версии 3.0. Вам не нужно понимать это, если вы не хотите использовать существующий сторонний подключаемый модуль интерфейса RPC или если вы хотите написать свой собственный подключаемый модуль интерфейса RPC.

## Настройка фабрик интерфейсов XML-RPC

Дополнительный интерфейс RPC настраивается в установке супервизора путем добавления раздела `[rpcinterface:x]` в файл конфигурации супервизора.

В образце файла конфигурации есть раздел с именем `[rpcinterface:supervisor]`. По умолчанию это выглядит так:

```ini
[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
```

Этот раздел должен оставаться в конфигурации для правильной работы стандартной настройки супервизора. Если вы не хотите, чтобы супервизор делал что-то, чего он еще не делает по умолчанию, это все, что вам нужно знать об этом типе раздела.

Однако, если вы хотите добавить дополнительные пространства имен интерфейса XML-RPC в конфигурацию супервизора, вы можете добавить дополнительные разделы `[rpcinterface:foo]`, где «foo» представляет пространство имен интерфейса (от корневого веб-узла), а значение, названное `supervisor.rpcinterface_factory` — это вызываемая фабрика, написанная на Python, которая должна иметь сигнатуру функции, которая принимает один позиционный аргумент **supervisord** и столько аргументов ключевого слова, сколько требуется для выполнения конфигурации. Любые пары ключ/значение, определенные в разделе `rpcinterface:foo`, будут переданы фабрике в качестве аргументов ключевого слова. Вот пример фабричной функции, созданной в пакете `my.package`.

```python
def make_another_rpcinterface(supervisord, **config):
    retries = int(config.get('retries', 0))
    another_rpc_interface = AnotherRPCInterface(supervisord, retries)
    return another_rpc_interface
```

И раздел в файле конфигурации предназначен для его настройки.

```ini
[rpcinterface:another]
supervisor.rpcinterface_factory = my.package:make_another_rpcinterface
retries = 1
```
