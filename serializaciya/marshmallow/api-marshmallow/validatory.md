# Валидаторы

Классы проверки для различных типов данных.

#### Классы:

| Классы                                                                  | Описание                                                                                                                                                                                            |
| ----------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [And](validatory.md#and)(\*validators\[, error])                        | Составьте несколько валидаторов и объедините их сообщения об ошибках.                                                                                                                               |
| [ContainsNoneOf](validatory.md#containsnoneof)(iterable, \*\[, error])  | Валидатор, который терпит неудачу, если **value** является последовательностью, и любой элемент в последовательности является членом последовательности, переданной как **iterable**.               |
| [ContainsOnly](validatory.md#containsonly)(choices\[, labels, error])   | Валидатор, который завершается успешно, если **value** является последовательностью, и каждый элемент в последовательности также находится в последовательности, переданной в качестве **choices**. |
| [Email](validatory.md#email)(\*\[, error])                              | Проверяет адрес электронной почты.                                                                                                                                                                  |
| [Equal](validatory.md#equal)(comparable, \*\[, error])                  | Валидатор, который завершается успешно, если переданное ему значение равно сравниваемому **comparable**.                                                                                            |
| [Length](validatory.md#length)(\[min, max, equal, error])               | Валидатор, который завершается успешно, если переданное ему значение имеет длину между минимумом и максимумом.                                                                                      |
| [NoneOf](validatory.md#noneof)(iterable, \*\[, error])                  | Валидатор, который дает сбой, если значение является членом **iterable**.                                                                                                                           |
| [OneOf](validatory.md#oneof)(choices\[, labels, error])                 | Валидатор, который завершается успешно, если значение является элементом **choices**.                                                                                                               |
| [Predicate](validatory.md#predicate)(method, \*\[, error])              | Вызывает указанный **method** объекта значения **value**.                                                                                                                                           |
| [Range](validatory.md#range)(\[min, max, min\_inclusive, ...])          | Валидатор, который завершается успешно, если переданное ему значение находится в пределах указанного диапазона.                                                                                     |
| [Regexp](validatory.md#regexp)(regex\[, flags, error])                  | Валидатор, который завершается успешно, если значение соответствует регулярному выражению **regex**.                                                                                                |
| [URL](validatory.md#url)(\*\[, relative, schemes, require\_tld, error]) | Проверяет URL-адрес.                                                                                                                                                                                |
| [Validator](validatory.md#validator)()                                  | Абстрактный базовый класс для валидаторов.                                                                                                                                                          |

## And

#### _class_ marshmallow.validate.And(_\*validators: types.Validator_, _error: str | None = None_)

Составьте несколько валидаторов и объедините их сообщения об ошибках.

Пример:

```python
from marshmallow import validate, ValidationError

def is_even(value):
    if value % 2 != 0:
        raise ValidationError("Not an even value.")

validator = validate.And(validate.Range(min=0), is_even)
validator(-1)
# ValidationError: ['Must be greater than or equal to 0.', 'Not an even value.']
```

#### Параметры:

* **validators** - Валидаторы для объединения.
* **error** - Сообщение об ошибке, используемое, когда валидатор возвращает `False`.

## ContainsNoneOf

#### _class_ marshmallow.validate.ContainsNoneOf(_iterable: Iterable_, _\*_, _error: str | None = None_)

Валидатор, который терпит неудачу, если значение **value** является последовательностью, и любой элемент в последовательности является членом последовательности, переданной как **iterable**. Пустой ввод считается действительным.

#### Параметры:

* **iterable** (iterable) - То же, что и [NoneOf](validatory.md#noneof).
* **error** (str) - То же, что и [NoneOf](validatory.md#noneof).

_Новое в версии 3.6.0_.

## ContainsOnly

#### _class_ marshmallow.validate.ContainsOnly(_choices: Iterable_, _labels: Iterable\[str] | None = None_, _\*_, _error: str | None = None_)

Валидатор, который завершается успешно, если значение **value** является последовательностью, и каждый элемент в последовательности также находится в последовательности, переданной в качестве **choices**. Пустой ввод считается действительным.

#### Параметры:

* **choices** (iterable) - То же, что и [OneOf](validatory.md#oneof).
* **labels** (iterable) - То же, что и [OneOf](validatory.md#oneof).
* **error** (str) - То же, что и [OneOf](validatory.md#oneof).

_Изменено в версии 3.0.0b2_: Повторяющиеся значения считаются допустимыми.

_Изменено в версии 3.0.0b2_: Пустой ввод считается действительным. Используйте `validate.Length(min=1)` для проверки пустых входных данных.

## Email

#### _class_ marshmallow.validate.Email(_\*_, _error: str | None = None_)

Проверяет адрес электронной почты.

#### Параметры:

* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}`.

## Equal

#### _class_ marshmallow.validate.Equal(_comparable_, _\*_, _error: str | None = None_)

Валидатор, который завершается успешно, если переданное ему значение **value** равно сравниваемому **comparable**.

#### Параметры:

* **comparable** - Объект для сравнения.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}` и `{other}`.

## Length

#### _class_ marshmallow.validate.Length(_min: int | None = None_, _max: int | None = None_, _\*_, _equal: int | None = None_, _error: str | None = None_)

Валидатор, который завершается успешно, если переданное ему значение имеет длину между минимумом и максимумом. Использует `len()`, поэтому он может работать со строками, списками или чем-то еще, имеющим длину.

#### Параметры:

* **min** - Минимальная длина. Если не указано, минимальная длина не будет проверяться.
* **max** - Максимальная длина. Если не указано, максимальная длина не будет проверяться.
* **equal** - Точная длина. Если указано, максимальная и минимальная длина не будут проверяться.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}`, `{min}` и `{max}`.

## NoneOf

#### _class_ marshmallow.validate.NoneOf(_iterable: Iterable_, _\*_, _error: str | None = None_)

Валидатор, который дает сбой, если значение **value** является членом **iterable**.

#### Параметры:

* **iterable** - Последовательность недопустимых значений.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать, используя `{input}` и `{values}`.

## OneOf

#### _class_ marshmallow.validate.OneOf(_choices: Iterable_, _labels: Iterable\[str] | None = None_, _\*_, _error: str | None = None_)

Валидатор, который завершается успешно, если значение **value** является элементом **choices**.

#### Параметры:

* **choices** - Последовательность допустимых значений.
* **labels** - Необязательная последовательность меток для сопряжения с вариантами выбора.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}`, `{choices}` и `{labels}`.

#### Методы:

| Метод                   | Описание                                                                                           |
| ----------------------- | -------------------------------------------------------------------------------------------------- |
| options(\[valuegetter]) | Возвращает генератор пар (значение, метка), где значение — это строка, связанная с каждым выбором. |

### options()

#### options(_valuegetter: str | typing.Callable\[\[typing.Any], typing.Any] = \<class 'str'>_) → Iterable\[tuple\[Any, str]]

Возвращает генератор пар (значение, метка), где значение — это строка, связанная с каждым выбором. Этот удобный метод полезен, например, для заполнения поля выбора формы.

#### Параметры:

* **valuegetter** - Может быть вызываемым объектом _callable_ или строкой _string_. В первом случае это должен быть вызываемый объект с одним аргументом, который возвращает значение выбора. В последнем случае в строке указывается имя атрибута объектов выбора. По умолчанию это `str()`.

## Predicate

#### _class_ marshmallow.validate.Predicate(_method: str_, _\*_, _error: str | None = None_, _\*\*kwargs_)

Вызывает указанный метод **method** объекта значения **value**. Валидатор завершается успешно, если вызванный метод возвращает объект, который оценивается как `True` в логическом контексте. Любой дополнительный аргумент ключевого слова будет передан методу.

#### Параметры:

* **method** - Имя вызываемого метода.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}` и `{method}`.
* **kwargs** - Дополнительные аргументы ключевого слова для передачи методу.

## Range

#### _class_ marshmallow.validate.Range(_min=None_, _max=None_, _\*_, _min\_inclusive: bool = True_, _max\_inclusive: bool = True_, _error: str | None = None_)

Валидатор, который завершается успешно, если переданное ему значение находится в пределах указанного диапазона. Если **min** не указан или указан как `None`, нижняя граница не существует. Если значение **max** не указано или указано как `None`, верхней границы не существует. Инклюзивность границ (если они существуют) настраивается. Если **min\_inclusive** не указан или указан как `True`, то минимальная граница включается в диапазон. Если **max\_inclusive** не указан или указан как `True`, то максимальная граница включается в диапазон.

#### Параметры:

* **min** - Минимальное значение (нижняя граница). Если не указано, минимальное значение не будет проверяться.
* **max** - Максимальное значение (верхняя граница). Если не указано, максимальное значение не будет проверяться.
* **min\_inclusive** - Включать ли минимальную границу в диапазон.
* **max\_inclusive** - Включать ли максимальную границу в диапазон.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}`, `{min}` и `{max}`.

## Regexp

#### _class_ marshmallow.validate.Regexp(_regex: str | bytes | Pattern_, _flags: int = 0_, _\*_, _error: str | None = None_)

Валидатор, который завершается успешно, если значение **value** соответствует регулярному выражению **regex**.

{% hint style="info" %}
Использует [re.match](https://python.readthedocs.io/en/latest/library/re.html#re.match), который ищет совпадение в начале строки.
{% endhint %}

#### Параметры:

* **regex** - Используемая строка регулярного выражения. Также может быть скомпилированным шаблоном регулярного выражения.
* **flags** - Используемые флаги регулярного выражения, например **re.IGNORECASE**. Игнорируется, если регулярное выражение не является строкой.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}` и `{regex}`.

## URL

#### _class_ marshmallow.validate.URL(_\*_, _relative: bool = False_, _schemes: types.StrSequenceOrSet | None = None_, _require\_tld: bool = True_, _error: str | None = None_)

Проверяет URL-адрес.

#### Параметры:

* **relative** - Разрешить ли относительные URL-адреса.
* **error** - Сообщение об ошибке, которое возникает в случае ошибки проверки. Можно интерполировать с помощью `{input}`.
* **schemes** - Действующие схемы. По умолчанию разрешены **http**, **https**, **ftp** и **ftps**.
* **require\_tld** - Следует ли отклонять имена хостов, отличные от FQDN.

## Validator

Абстрактный базовый класс для валидаторов.

{% hint style="info" %}
Этот класс не обеспечивает никакого поведения проверки. Он используется только для добавления полезной реализации **\_\_repr\_\_** для валидаторов.
{% endhint %}
